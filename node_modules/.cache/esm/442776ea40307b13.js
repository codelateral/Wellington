let addLink,deleteLink,getPlaylist;_403‍.x([["default",()=>handle_playlist]]);_403‍.w("./playlist",[["addLink",["addLink"],function(v){addLink=v}],["deleteLink",["deleteLink"],function(v){deleteLink=v}],["getPlaylist",["getPlaylist"],function(v){getPlaylist=v}]]);const mongoose = require("mongoose");



let connectedToDB = false;

               function handle_playlist(message, command, args) {
	if (!connectedToDB) {
		mongoose.connect(process.env.MONGO_URI, {
			useNewUrlParser: true,
			useUnifiedTopology: true,
		});
		const db = mongoose.connection;
		db.on("error", _403‍.g.console.error.bind(_403‍.g.console, "connection error:"));
		db.once("open", function () {
			// we're connected!
			console.log("Connected to MongoDB");
		});
		connectedToDB = true;
	}
	switch (command) {
		case "add":
			addLink(message, command, args);
			break;
		case "delete":
			deleteLink(message, command, args);
			break;
		case "playlist":
			getPlaylist(message, command, args);
			break;
	}
}
